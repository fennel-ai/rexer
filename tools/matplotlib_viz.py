""" Parse trace data and plot a graph with elapsed time

To run:

1. Copy and paste the trace data (the entire log message).
2. Run:
    `poetry run python matplotlib_viz.py`

Or

you can pass a JSON file with the trace data.
"""

import argparse
import json
from collections import namedtuple
from typing import List

import matplotlib.pyplot as plt
import numpy as np

parser = argparse.ArgumentParser()
parser.add_argument("--trace-path", help="path to the json file with the trace")
parser.add_argument("--most-n", default=50, help="plot longest n traces")
args = parser.parse_args()
n = args.most_n
path = args.trace_path

_JSON_DATA = r'''
    {
    "level": "info",
    "ts": "2022-05-13T16:49:10Z",
    "caller": "timer/trace.go:60",
    "msg": "====Trace====\n\t    0ms: enter:PkmgHb:query\n\t    6ms: enter:Nruqbn:interpreter.eval\n\t    6ms: enter:QSfMUm:model.profile.cached.get_batched\n\t    6ms: enter:RIkShw:redis.mget\n\t    6ms: exit:RIkShw:redis.mget\n\t    6ms: exit:QSfMUm:model.profile.cached.get_batched\n\t    7ms: enter:MLJccr:model.profile.cached.get_batched\n\t    7ms: enter:uMlHNS:redis.mget\n\t    7ms: exit:uMlHNS:redis.mget\n\t    7ms: exit:MLJccr:model.profile.cached.get_batched\n\t    9ms: enter:TnshZd:twolevelredis.get_multi\n\t    9ms: enter:ZJvhBp:redis.mget\n\t   10ms: exit:ZJvhBp:redis.mget\n\t   11ms: exit:TnshZd:twolevelredis.get_multi\n\t   12ms: enter:eehMkC:model.profile.cached.get_batched\n\t   12ms: enter:diFxvC:redis.mget\n\t   12ms: exit:diFxvC:redis.mget\n\t   12ms: exit:eehMkC:model.profile.cached.get_batched\n\t   13ms: enter:ktunxW:model.profile.cached.get_batched\n\t   13ms: enter:yjMzij:redis.mget\n\t   13ms: exit:yjMzij:redis.mget\n\t   13ms: exit:ktunxW:model.profile.cached.get_batched\n\t   16ms: enter:kJOtDE:twolevelredis.get_multi\n\t   16ms: enter:wHKeDr:redis.mget\n\t   17ms: exit:wHKeDr:redis.mget\n\t   18ms: exit:kJOtDE:twolevelredis.get_multi\n\t   19ms: enter:TrkDQL:model.profile.cached.get_batched\n\t   19ms: enter:YvKmhm:redis.mget\n\t   19ms: exit:YvKmhm:redis.mget\n\t   19ms: exit:TrkDQL:model.profile.cached.get_batched\n\t   20ms: enter:pdQWeA:model.profile.cached.get_batched\n\t   20ms: enter:LUGstx:redis.mget\n\t   20ms: exit:LUGstx:redis.mget\n\t   20ms: exit:pdQWeA:model.profile.cached.get_batched\n\t   23ms: enter:CDcgBL:twolevelredis.get_multi\n\t   23ms: enter:euYyFB:redis.mget\n\t   24ms: exit:euYyFB:redis.mget\n\t   26ms: exit:CDcgBL:twolevelredis.get_multi\n\t   27ms: enter:dfgfKq:model.profile.cached.get_batched\n\t   27ms: enter:IBqeIe:redis.mget\n\t   27ms: exit:IBqeIe:redis.mget\n\t   27ms: exit:dfgfKq:model.profile.cached.get_batched\n\t   28ms: enter:OHteTS:model.profile.cached.get_batched\n\t   28ms: enter:DwLwlq:redis.mget\n\t   28ms: exit:DwLwlq:redis.mget\n\t   28ms: exit:OHteTS:model.profile.cached.get_batched\n\t   30ms: enter:uRdetq:twolevelredis.get_multi\n\t   30ms: enter:jDYPtg:redis.mget\n\t   31ms: exit:jDYPtg:redis.mget\n\t   32ms: exit:uRdetq:twolevelredis.get_multi\n\t   33ms: enter:sxfLkW:model.profile.cached.get_batched\n\t   33ms: enter:dVThQN:redis.mget\n\t   33ms: exit:dVThQN:redis.mget\n\t   33ms: exit:sxfLkW:model.profile.cached.get_batched\n\t   34ms: enter:GoZhXi:model.profile.cached.get_batched\n\t   34ms: enter:YJLoqm:redis.mget\n\t   34ms: exit:YJLoqm:redis.mget\n\t   34ms: exit:GoZhXi:model.profile.cached.get_batched\n\t   37ms: enter:LXPBhW:twolevelredis.get_multi\n\t   37ms: enter:ondxXK:redis.mget\n\t   38ms: exit:ondxXK:redis.mget\n\t   39ms: exit:LXPBhW:twolevelredis.get_multi\n\t   40ms: enter:FukUmh:model.profile.cached.get_batched\n\t   40ms: enter:aotFhN:redis.mget\n\t   40ms: exit:aotFhN:redis.mget\n\t   40ms: exit:FukUmh:model.profile.cached.get_batched\n\t   41ms: enter:ZpdfrZ:model.profile.cached.get_batched\n\t   41ms: enter:yytedt:redis.mget\n\t   41ms: exit:yytedt:redis.mget\n\t   41ms: exit:ZpdfrZ:model.profile.cached.get_batched\n\t   44ms: enter:QIIJSv:twolevelredis.get_multi\n\t   44ms: enter:aqOyAl:redis.mget\n\t   44ms: exit:aqOyAl:redis.mget\n\t   47ms: exit:QIIJSv:twolevelredis.get_multi\n\t   48ms: enter:kQYfeh:model.profile.cached.get_batched\n\t   48ms: enter:MGqXic:redis.mget\n\t   48ms: exit:MGqXic:redis.mget\n\t   48ms: exit:kQYfeh:model.profile.cached.get_batched\n\t   48ms: enter:hpCJeh:model.profile.cached.get_batched\n\t   49ms: enter:ViwVNB:redis.mget\n\t   49ms: exit:ViwVNB:redis.mget\n\t   49ms: exit:hpCJeh:model.profile.cached.get_batched\n\t   51ms: enter:AULAuk:twolevelredis.get_multi\n\t   51ms: enter:rkceUk:redis.mget\n\t   51ms: exit:rkceUk:redis.mget\n\t   52ms: exit:AULAuk:twolevelredis.get_multi\n\t   54ms: enter:ghPeoL:model.profile.cached.get_batched\n\t   54ms: enter:gGmeuO:redis.mget\n\t   54ms: exit:gGmeuO:redis.mget\n\t   54ms: exit:ghPeoL:model.profile.cached.get_batched\n\t   54ms: enter:BsZRSG:model.profile.cached.get_batched\n\t   54ms: enter:BBoOZB:redis.mget\n\t   54ms: exit:BBoOZB:redis.mget\n\t   54ms: exit:BsZRSG:model.profile.cached.get_batched\n\t   58ms: enter:IEZBhU:twolevelredis.get_multi\n\t   58ms: enter:bAClns:redis.mget\n\t   58ms: exit:bAClns:redis.mget\n\t   59ms: exit:IEZBhU:twolevelredis.get_multi\n\t   61ms: enter:NVqpEp:model.profile.cached.get_batched\n\t   61ms: enter:dxECbT:redis.mget\n\t   61ms: exit:dxECbT:redis.mget\n\t   61ms: exit:NVqpEp:model.profile.cached.get_batched\n\t   61ms: enter:xHhZrw:model.profile.cached.get_batched\n\t   61ms: enter:exlNFc:redis.mget\n\t   61ms: exit:exlNFc:redis.mget\n\t   61ms: exit:xHhZrw:model.profile.cached.get_batched\n\t   63ms: enter:GwHsHy:twolevelredis.get_multi\n\t   63ms: enter:qxfgir:redis.mget\n\t   64ms: exit:qxfgir:redis.mget\n\t   66ms: exit:GwHsHy:twolevelredis.get_multi\n\t   67ms: enter:UANYjg:model.profile.cached.get_batched\n\t   67ms: enter:ygonKr:redis.mget\n\t   67ms: exit:ygonKr:redis.mget\n\t   67ms: exit:UANYjg:model.profile.cached.get_batched\n\t   68ms: enter:bSUazv:model.profile.cached.get_batched\n\t   68ms: enter:CnLBDg:redis.mget\n\t   68ms: exit:CnLBDg:redis.mget\n\t   68ms: exit:bSUazv:model.profile.cached.get_batched\n\t   71ms: enter:QuoOOI:twolevelredis.get_multi\n\t   71ms: enter:IyAbzL:redis.mget\n\t   72ms: exit:IyAbzL:redis.mget\n\t   72ms: exit:QuoOOI:twolevelredis.get_multi\n\t   74ms: enter:fnXWHZ:model.profile.cached.get_batched\n\t   74ms: enter:hlQznv:redis.mget\n\t   74ms: exit:hlQznv:redis.mget\n\t   74ms: exit:fnXWHZ:model.profile.cached.get_batched\n\t   75ms: enter:WwSVZH:model.profile.cached.get_batched\n\t   75ms: enter:PLOUgP:redis.mget\n\t   75ms: exit:PLOUgP:redis.mget\n\t   75ms: exit:WwSVZH:model.profile.cached.get_batched\n\t   78ms: enter:UdMlff:twolevelredis.get_multi\n\t   78ms: enter:qzuYgk:redis.mget\n\t   79ms: exit:qzuYgk:redis.mget\n\t   80ms: exit:UdMlff:twolevelredis.get_multi\n\t   81ms: enter:wkSqyo:model.profile.cached.get_batched\n\t   81ms: enter:SXRgSV:redis.mget\n\t   81ms: exit:SXRgSV:redis.mget\n\t   81ms: exit:wkSqyo:model.profile.cached.get_batched\n\t   82ms: enter:tRlkYP:model.profile.cached.get_batched\n\t   82ms: enter:ZLhWPo:redis.mget\n\t   82ms: exit:ZLhWPo:redis.mget\n\t   82ms: exit:tRlkYP:model.profile.cached.get_batched\n\t   85ms: enter:ylrFSC:twolevelredis.get_multi\n\t   85ms: enter:GOdkQW:redis.mget\n\t   86ms: exit:GOdkQW:redis.mget\n\t   86ms: exit:ylrFSC:twolevelredis.get_multi\n\t   88ms: enter:VsPDSm:model.profile.cached.get_batched\n\t   88ms: enter:yOQkWb:redis.mget\n\t   88ms: exit:yOQkWb:redis.mget\n\t   88ms: exit:VsPDSm:model.profile.cached.get_batched\n\t   88ms: enter:yNaxhq:model.profile.cached.get_batched\n\t   88ms: enter:ikdDTZ:redis.mget\n\t   88ms: exit:ikdDTZ:redis.mget\n\t   88ms: exit:yNaxhq:model.profile.cached.get_batched\n\t   90ms: enter:jLicOM:twolevelredis.get_multi\n\t   90ms: enter:ztvpnJ:redis.mget\n\t   91ms: exit:ztvpnJ:redis.mget\n\t   91ms: exit:jLicOM:twolevelredis.get_multi\n\t   93ms: enter:BtxrIb:model.profile.cached.get_batched\n\t   93ms: enter:AMUQgt:redis.mget\n\t   93ms: exit:AMUQgt:redis.mget\n\t   93ms: exit:BtxrIb:model.profile.cached.get_batched\n\t   94ms: enter:TcnjQG:model.profile.cached.get_batched\n\t   94ms: enter:blTCHB:redis.mget\n\t   94ms: exit:blTCHB:redis.mget\n\t   94ms: exit:TcnjQG:model.profile.cached.get_batched\n\t   95ms: enter:GRCZgs:twolevelredis.get_multi\n\t   95ms: enter:MeNzVF:redis.mget\n\t   96ms: exit:MeNzVF:redis.mget\n\t   97ms: exit:GRCZgs:twolevelredis.get_multi\n\t   98ms: enter:AUXzzL:model.profile.cached.get_batched\n\t   98ms: enter:rmhJQo:redis.mget\n\t   98ms: exit:rmhJQo:redis.mget\n\t   98ms: exit:AUXzzL:model.profile.cached.get_batched\n\t   99ms: enter:CBzNto:model.profile.cached.get_batched\n\t   99ms: enter:inmYiv:redis.mget\n\t   99ms: exit:inmYiv:redis.mget\n\t   99ms: exit:CBzNto:model.profile.cached.get_batched\n\t  102ms: enter:LzQdKF:twolevelredis.get_multi\n\t  102ms: enter:tjvkwW:redis.mget\n\t  103ms: exit:tjvkwW:redis.mget\n\t  104ms: exit:LzQdKF:twolevelredis.get_multi\n\t  105ms: enter:qOmMSY:model.profile.cached.get_batched\n\t  105ms: enter:rcYTvT:redis.mget\n\t  105ms: exit:rcYTvT:redis.mget\n\t  105ms: exit:qOmMSY:model.profile.cached.get_batched\n\t  106ms: enter:XurYWK:model.profile.cached.get_batched\n\t  106ms: enter:VPaUAg:redis.mget\n\t  106ms: exit:VPaUAg:redis.mget\n\t  106ms: exit:XurYWK:model.profile.cached.get_batched\n\t  109ms: enter:IyGaYo:twolevelredis.get_multi\n\t  109ms: enter:XgLojk:redis.mget\n\t  110ms: exit:XgLojk:redis.mget\n\t  110ms: exit:IyGaYo:twolevelredis.get_multi\n\t  112ms: enter:huvstU:model.profile.cached.get_batched\n\t  112ms: enter:rQfXfR:redis.mget\n\t  112ms: exit:rQfXfR:redis.mget\n\t  112ms: exit:huvstU:model.profile.cached.get_batched\n\t  113ms: enter:RDgFZE:model.profile.cached.get_batched\n\t  113ms: enter:XdQSHV:redis.mget\n\t  113ms: exit:XdQSHV:redis.mget\n\t  113ms: exit:RDgFZE:model.profile.cached.get_batched\n\t  116ms: enter:EGoUHy:twolevelredis.get_multi\n\t  116ms: enter:olybZy:redis.mget\n\t  117ms: exit:olybZy:redis.mget\n\t  118ms: exit:EGoUHy:twolevelredis.get_multi\n\t  119ms: enter:KXuWVa:model.profile.cached.get_batched\n\t  119ms: enter:QhQtcR:redis.mget\n\t  119ms: exit:QhQtcR:redis.mget\n\t  119ms: exit:KXuWVa:model.profile.cached.get_batched\n\t  120ms: enter:WrDuLi:model.profile.cached.get_batched\n\t  120ms: enter:KtwxnU:redis.mget\n\t  120ms: exit:KtwxnU:redis.mget\n\t  120ms: exit:WrDuLi:model.profile.cached.get_batched\n\t  123ms: enter:GzoWEv:twolevelredis.get_multi\n\t  123ms: enter:IQIPEx:redis.mget\n\t  124ms: exit:IQIPEx:redis.mget\n\t  124ms: exit:GzoWEv:twolevelredis.get_multi\n\t  126ms: enter:pBDMIk:model.profile.cached.get_batched\n\t  126ms: enter:LlUhog:redis.mget\n\t  126ms: exit:LlUhog:redis.mget\n\t  126ms: exit:pBDMIk:model.profile.cached.get_batched\n\t  127ms: enter:EDvQBw:model.profile.cached.get_batched\n\t  127ms: enter:SNtgYg:redis.mget\n\t  127ms: exit:SNtgYg:redis.mget\n\t  127ms: exit:EDvQBw:model.profile.cached.get_batched\n\t  130ms: enter:bRxVgI:twolevelredis.get_multi\n\t  130ms: enter:AwiXSe:redis.mget\n\t  130ms: exit:AwiXSe:redis.mget\n\t  131ms: exit:bRxVgI:twolevelredis.get_multi\n\t  132ms: enter:dkAxeG:model.profile.cached.get_batched\n\t  132ms: enter:BmFeeK:redis.mget\n\t  132ms: exit:BmFeeK:redis.mget\n\t  132ms: exit:dkAxeG:model.profile.cached.get_batched\n\t  133ms: enter:CbaIyn:model.profile.cached.get_batched\n\t  133ms: enter:NIySNb:redis.mget\n\t  133ms: exit:NIySNb:redis.mget\n\t  133ms: exit:CbaIyn:model.profile.cached.get_batched\n\t  135ms: enter:axQdlD:twolevelredis.get_multi\n\t  135ms: enter:gbagsa:redis.mget\n\t  135ms: exit:gbagsa:redis.mget\n\t  136ms: exit:axQdlD:twolevelredis.get_multi\n\t  138ms: enter:zvtTuO:model.profile.cached.get_batched\n\t  138ms: enter:WsEzGm:redis.mget\n\t  138ms: exit:WsEzGm:redis.mget\n\t  138ms: exit:zvtTuO:model.profile.cached.get_batched\n\t  138ms: enter:UcoVIl:model.profile.cached.get_batched\n\t  138ms: enter:ypXlRU:redis.mget\n\t  138ms: exit:ypXlRU:redis.mget\n\t  138ms: exit:UcoVIl:model.profile.cached.get_batched\n\t  141ms: enter:rRTVxz:twolevelredis.get_multi\n\t  141ms: enter:MahiOP:redis.mget\n\t  142ms: exit:MahiOP:redis.mget\n\t  144ms: exit:rRTVxz:twolevelredis.get_multi\n\t  145ms: enter:TpDpob:model.profile.cached.get_batched\n\t  145ms: enter:WhjHwe:redis.mget\n\t  145ms: exit:WhjHwe:redis.mget\n\t  145ms: exit:TpDpob:model.profile.cached.get_batched\n\t  146ms: enter:ZSXYcQ:model.profile.cached.get_batched\n\t  146ms: enter:AsNKtm:redis.mget\n\t  146ms: exit:AsNKtm:redis.mget\n\t  146ms: exit:ZSXYcQ:model.profile.cached.get_batched\n\t  149ms: enter:pdwhlN:twolevelredis.get_multi\n\t  149ms: enter:eDjOqS:redis.mget\n\t  150ms: exit:eDjOqS:redis.mget\n\t  150ms: exit:pdwhlN:twolevelredis.get_multi\n\t  152ms: enter:fKRgDB:model.profile.cached.get_batched\n\t  152ms: enter:SxTuBV:redis.mget\n\t  152ms: exit:SxTuBV:redis.mget\n\t  152ms: exit:fKRgDB:model.profile.cached.get_batched\n\t  152ms: enter:RxGXjz:model.profile.cached.get_batched\n\t  152ms: enter:hNeOOJ:redis.mget\n\t  152ms: exit:hNeOOJ:redis.mget\n\t  152ms: exit:RxGXjz:model.profile.cached.get_batched\n\t  155ms: enter:juoGsh:twolevelredis.get_multi\n\t  155ms: enter:YtGwbk:redis.mget\n\t  156ms: exit:YtGwbk:redis.mget\n\t  157ms: exit:juoGsh:twolevelredis.get_multi\n\t  158ms: enter:KqCflD:model.profile.cached.get_batched\n\t  158ms: enter:jHRZPW:redis.mget\n\t  158ms: exit:jHRZPW:redis.mget\n\t  158ms: exit:KqCflD:model.profile.cached.get_batched\n\t  159ms: enter:PDeqpb:model.profile.cached.get_batched\n\t  159ms: enter:cyaqjG:redis.mget\n\t  159ms: exit:cyaqjG:redis.mget\n\t  159ms: exit:PDeqpb:model.profile.cached.get_batched\n\t  162ms: enter:RrmJrK:twolevelredis.get_multi\n\t  162ms: enter:jcAFTZ:redis.mget\n\t  163ms: exit:jcAFTZ:redis.mget\n\t  165ms: exit:RrmJrK:twolevelredis.get_multi\n\t  167ms: enter:eCBWJL:model.profile.cached.get_batched\n\t  167ms: enter:fzdgyU:redis.mget\n\t  167ms: exit:fzdgyU:redis.mget\n\t  167ms: exit:eCBWJL:model.profile.cached.get_batched\n\t  167ms: enter:XFsCwu:model.profile.cached.get_batched\n\t  167ms: enter:oqgfyS:redis.mget\n\t  167ms: exit:oqgfyS:redis.mget\n\t  167ms: exit:XFsCwu:model.profile.cached.get_batched\n\t  170ms: enter:KmZjis:twolevelredis.get_multi\n\t  170ms: enter:OwBphu:redis.mget\n\t  171ms: exit:OwBphu:redis.mget\n\t  171ms: exit:KmZjis:twolevelredis.get_multi\n\t  173ms: enter:fSoabj:model.profile.cached.get_batched\n\t  173ms: enter:oXAJNd:redis.mget\n\t  173ms: exit:oXAJNd:redis.mget\n\t  173ms: exit:fSoabj:model.profile.cached.get_batched\n\t  173ms: enter:SjCTeg:model.profile.cached.get_batched\n\t  173ms: enter:LkuvDt:redis.mget\n\t  173ms: exit:LkuvDt:redis.mget\n\t  173ms: exit:SjCTeg:model.profile.cached.get_batched\n\t  176ms: enter:DONmlI:twolevelredis.get_multi\n\t  177ms: enter:zFDEoq:redis.mget\n\t  177ms: exit:zFDEoq:redis.mget\n\t  178ms: exit:DONmlI:twolevelredis.get_multi\n\t  180ms: enter:vMhbOo:model.profile.cached.get_batched\n\t  180ms: enter:PNgrcF:redis.mget\n\t  180ms: exit:PNgrcF:redis.mget\n\t  180ms: exit:vMhbOo:model.profile.cached.get_batched\n\t  180ms: enter:GQhrqV:model.profile.cached.get_batched\n\t  180ms: enter:wDVOWq:redis.mget\n\t  180ms: exit:wDVOWq:redis.mget\n\t  180ms: exit:GQhrqV:model.profile.cached.get_batched\n\t  183ms: enter:TmtwOn:twolevelredis.get_multi\n\t  183ms: enter:WNTKWH:redis.mget\n\t  184ms: exit:WNTKWH:redis.mget\n\t  186ms: exit:TmtwOn:twolevelredis.get_multi\n\t  188ms: enter:WBXKjd:model.profile.cached.get_batched\n\t  188ms: enter:lmozmp:redis.mget\n\t  188ms: exit:lmozmp:redis.mget\n\t  188ms: exit:WBXKjd:model.profile.cached.get_batched\n\t  189ms: enter:hnpqgl:model.profile.cached.get_batched\n\t  189ms: enter:lEvjRz:redis.mget\n\t  189ms: exit:lEvjRz:redis.mget\n\t  189ms: exit:hnpqgl:model.profile.cached.get_batched\n\t  192ms: enter:HvZmJH:twolevelredis.get_multi\n\t  192ms: enter:CygxKm:redis.mget\n\t  193ms: exit:CygxKm:redis.mget\n\t  193ms: exit:HvZmJH:twolevelredis.get_multi\n\t  195ms: enter:ypYLwb:model.profile.cached.get_batched\n\t  195ms: enter:MuiBxI:redis.mget\n\t  195ms: exit:MuiBxI:redis.mget\n\t  195ms: exit:ypYLwb:model.profile.cached.get_batched\n\t  196ms: enter:VUfgmZ:model.profile.cached.get_batched\n\t  196ms: enter:vmTJnz:redis.mget\n\t  196ms: exit:vmTJnz:redis.mget\n\t  196ms: exit:VUfgmZ:model.profile.cached.get_batched\n\t  198ms: enter:iUHcfO:twolevelredis.get_multi\n\t  198ms: enter:ASOLqu:redis.mget\n\t  198ms: exit:ASOLqu:redis.mget\n\t  199ms: exit:iUHcfO:twolevelredis.get_multi\n\t  201ms: enter:NJlGue:model.profile.cached.get_batched\n\t  201ms: enter:ToLZfy:redis.mget\n\t  201ms: exit:ToLZfy:redis.mget\n\t  201ms: exit:NJlGue:model.profile.cached.get_batched\n\t  201ms: enter:NROFoF:model.profile.cached.get_batched\n\t  201ms: enter:JnxLuJ:redis.mget\n\t  201ms: exit:JnxLuJ:redis.mget\n\t  201ms: exit:NROFoF:model.profile.cached.get_batched\n\t  204ms: enter:fAVWEn:twolevelredis.get_multi\n\t  204ms: enter:vPrDso:redis.mget\n\t  205ms: exit:vPrDso:redis.mget\n\t  206ms: exit:fAVWEn:twolevelredis.get_multi\n\t  207ms: enter:CXluDC:model.profile.cached.get_batched\n\t  207ms: enter:tzVGms:redis.mget\n\t  207ms: exit:tzVGms:redis.mget\n\t  207ms: exit:CXluDC:model.profile.cached.get_batched\n\t  208ms: enter:ZpcjBS:model.profile.cached.get_batched\n\t  208ms: enter:cCYwFh:redis.mget\n\t  208ms: exit:cCYwFh:redis.mget\n\t  208ms: exit:ZpcjBS:model.profile.cached.get_batched\n\t  211ms: enter:eZERMG:twolevelredis.get_multi\n\t  211ms: enter:vxTtCf:redis.mget\n\t  212ms: exit:vxTtCf:redis.mget\n\t  212ms: exit:eZERMG:twolevelredis.get_multi\n\t  214ms: enter:lvKBLk:model.profile.cached.get_batched\n\t  214ms: enter:TWfUKX:redis.mget\n\t  214ms: exit:TWfUKX:redis.mget\n\t  214ms: exit:lvKBLk:model.profile.cached.get_batched\n\t  215ms: enter:Ovdgpr:model.profile.cached.get_batched\n\t  215ms: enter:YqYDEL:redis.mget\n\t  215ms: exit:YqYDEL:redis.mget\n\t  215ms: exit:Ovdgpr:model.profile.cached.get_batched\n\t  218ms: enter:AWBHWU:twolevelredis.get_multi\n\t  218ms: enter:JlwoAD:redis.mget\n\t  219ms: exit:JlwoAD:redis.mget\n\t  219ms: exit:AWBHWU:twolevelredis.get_multi\n\t  221ms: enter:JKGdLq:model.profile.cached.get_batched\n\t  221ms: enter:QksZoF:redis.mget\n\t  221ms: exit:QksZoF:redis.mget\n\t  221ms: exit:JKGdLq:model.profile.cached.get_batched\n\t  221ms: enter:TzXxgl:model.profile.cached.get_batched\n\t  221ms: enter:LJysMq:redis.mget\n\t  221ms: exit:LJysMq:redis.mget\n\t  221ms: exit:TzXxgl:model.profile.cached.get_batched\n\t  223ms: enter:PFvnzV:twolevelredis.get_multi\n\t  223ms: enter:YgsJKN:redis.mget\n\t  224ms: exit:YgsJKN:redis.mget\n\t  225ms: exit:PFvnzV:twolevelredis.get_multi\n\t  226ms: enter:iACPxJ:model.profile.cached.get_batched\n\t  226ms: enter:dmILFV:redis.mget\n\t  226ms: exit:dmILFV:redis.mget\n\t  226ms: exit:iACPxJ:model.profile.cached.get_batched\n\t  227ms: enter:SQtowk:model.profile.cached.get_batched\n\t  227ms: enter:HEQass:redis.mget\n\t  227ms: exit:HEQass:redis.mget\n\t  227ms: exit:SQtowk:model.profile.cached.get_batched\n\t  229ms: enter:OEfXFJ:twolevelredis.get_multi\n\t  229ms: enter:xfGZxO:redis.mget\n\t  229ms: exit:xfGZxO:redis.mget\n\t  230ms: exit:OEfXFJ:twolevelredis.get_multi\n\t  231ms: enter:BOYeJV:model.profile.cached.get_batched\n\t  231ms: enter:HSkatp:redis.mget\n\t  231ms: exit:HSkatp:redis.mget\n\t  231ms: exit:BOYeJV:model.profile.cached.get_batched\n\t  232ms: enter:wxgUuj:model.profile.cached.get_batched\n\t  232ms: enter:owHsih:redis.mget\n\t  232ms: exit:owHsih:redis.mget\n\t  232ms: exit:wxgUuj:model.profile.cached.get_batched\n\t  235ms: enter:ZnUxPG:twolevelredis.get_multi\n\t  235ms: enter:nicunv:redis.mget\n\t  236ms: exit:nicunv:redis.mget\n\t  237ms: exit:ZnUxPG:twolevelredis.get_multi\n\t  238ms: enter:zeqdtY:model.profile.cached.get_batched\n\t  238ms: enter:pESNPe:redis.mget\n\t  238ms: exit:pESNPe:redis.mget\n\t  238ms: exit:zeqdtY:model.profile.cached.get_batched\n\t  239ms: enter:Epxrds:model.profile.cached.get_batched\n\t  239ms: enter:RkDGrw:redis.mget\n\t  239ms: exit:RkDGrw:redis.mget\n\t  239ms: exit:Epxrds:model.profile.cached.get_batched\n\t  240ms: enter:eanGZH:twolevelredis.get_multi\n\t  240ms: enter:TgMAjl:redis.mget\n\t  241ms: exit:TgMAjl:redis.mget\n\t  242ms: exit:eanGZH:twolevelredis.get_multi\n\t  244ms: enter:cMDPrB:model.profile.cached.get_batched\n\t  244ms: enter:cbVTwf:redis.mget\n\t  244ms: enter:EhSJbM:model.profile.cached.get_batched\n\t  244ms: enter:wJMsEy:redis.mget\n\t  244ms: exit:wJMsEy:redis.mget\n\t  244ms: exit:EhSJbM:model.profile.cached.get_batched\n\t  244ms: enter:pEDlmI:model.profile.cached.get_batched\n\t  244ms: enter:MnMIBI:model.profile.cached.get_batched\n\t  244ms: enter:DtlEIk:redis.mget\n\t  244ms: enter:xWxrBT:redis.mget\n\t  244ms: exit:DtlEIk:redis.mget\n\t  244ms: exit:pEDlmI:model.profile.cached.get_batched\n\t  244ms: exit:xWxrBT:redis.mget\n\t  244ms: exit:MnMIBI:model.profile.cached.get_batched\n\t  244ms: enter:TCRRNh:model.profile.cached.get_batched\n\t  244ms: enter:KBoUJX:redis.mget\n\t  244ms: enter:WjGZgs:model.profile.cached.get_batched\n\t  244ms: enter:EpCFSV:redis.mget\n\t  244ms: exit:EpCFSV:redis.mget\n\t  244ms: exit:WjGZgs:model.profile.cached.get_batched\n\t  244ms: exit:cbVTwf:redis.mget\n\t  244ms: exit:cMDPrB:model.profile.cached.get_batched\n\t  245ms: exit:KBoUJX:redis.mget\n\t  245ms: exit:TCRRNh:model.profile.cached.get_batched\n\t  245ms: enter:eogUCk:model.profile.cached.get_batched\n\t  245ms: enter:uTnWjP:model.profile.cached.get_batched\n\t  245ms: enter:KmqqyY:redis.mget\n\t  245ms: exit:KmqqyY:redis.mget\n\t  245ms: exit:uTnWjP:model.profile.cached.get_batched\n\t  245ms: enter:uDhJkQ:redis.mget\n\t  245ms: enter:HSnuLI:model.profile.cached.get_batched\n\t  245ms: enter:hUWZsN:model.profile.cached.get_batched\n\t  245ms: enter:vmaKeM:redis.mget\n\t  245ms: enter:SPEojj:redis.mget\n\t  246ms: enter:HCErKL:model.profile.cached.get_batched\n\t  246ms: enter:zJsmNh:redis.mget\n\t  246ms: exit:zJsmNh:redis.mget\n\t  246ms: exit:HCErKL:model.profile.cached.get_batched\n\t  246ms: enter:XgNfYG:model.profile.cached.get_batched\n\t  246ms: enter:nhLjUn:redis.mget\n\t  246ms: exit:nhLjUn:redis.mget\n\t  246ms: exit:XgNfYG:model.profile.cached.get_batched\n\t  246ms: enter:hUzzTG:model.profile.cached.get_batched\n\t  246ms: enter:zAHPCo:redis.mget\n\t  246ms: exit:zAHPCo:redis.mget\n\t  246ms: exit:hUzzTG:model.profile.cached.get_batched\n\t  246ms: enter:ZmkNGa:model.profile.cached.get_batched\n\t  246ms: enter:SahdVq:redis.mget\n\t  246ms: exit:SahdVq:redis.mget\n\t  246ms: exit:ZmkNGa:model.profile.cached.get_batched\n\t  246ms: exit:vmaKeM:redis.mget\n\t  246ms: enter:arfNAl:model.profile.cached.get_batched\n\t  246ms: enter:fnVAEE:redis.mget\n\t  246ms: exit:fnVAEE:redis.mget\n\t  246ms: exit:arfNAl:model.profile.cached.get_batched\n\t  246ms: enter:waFhyu:model.profile.cached.get_batched\n\t  246ms: enter:biAswW:redis.mget\n\t  246ms: exit:biAswW:redis.mget\n\t  246ms: exit:waFhyu:model.profile.cached.get_batched\n\t  246ms: exit:HSnuLI:model.profile.cached.get_batched\n\t  246ms: enter:XJBrqp:model.profile.cached.get_batched\n\t  246ms: enter:weFNcy:redis.mget\n\t  246ms: exit:weFNcy:redis.mget\n\t  246ms: exit:XJBrqp:model.profile.cached.get_batched\n\t  246ms: exit:uDhJkQ:redis.mget\n\t  247ms: enter:lndVhE:model.profile.cached.get_batched\n\t  247ms: enter:Hlcymr:redis.mget\n\t  247ms: exit:Hlcymr:redis.mget\n\t  247ms: exit:lndVhE:model.profile.cached.get_batched\n\t  247ms: enter:WsCRzQ:twolevelredis.get_multi\n\t  247ms: exit:eogUCk:model.profile.cached.get_batched\n\t  247ms: enter:yRSLpc:model.profile.cached.get_batched\n\t  247ms: enter:uPtFPC:redis.mget\n\t  247ms: exit:uPtFPC:redis.mget\n\t  247ms: exit:yRSLpc:model.profile.cached.get_batched\n\t  247ms: enter:BIGMMT:model.profile.cached.get_batched\n\t  247ms: enter:VhwGtl:redis.mget\n\t  247ms: exit:VhwGtl:redis.mget\n\t  247ms: exit:BIGMMT:model.profile.cached.get_batched\n\t  247ms: enter:wevwES:model.profile.cached.get_batched\n\t  247ms: enter:mHGLAp:redis.mget\n\t  247ms: exit:mHGLAp:redis.mget\n\t  247ms: exit:wevwES:model.profile.cached.get_batched\n\t  248ms: enter:glERuw:twolevelredis.get_multi\n\t  248ms: enter:OkFqjW:twolevelredis.get_multi\n\t  248ms: enter:EqzQle:model.profile.cached.get_batched\n\t  248ms: enter:mHpIYr:redis.mget\n\t  248ms: exit:mHpIYr:redis.mget\n\t  248ms: exit:EqzQle:model.profile.cached.get_batched\n\t  248ms: enter:MwhStC:model.profile.cached.get_batched\n\t  248ms: enter:tQUyCb:redis.mget\n\t  248ms: exit:tQUyCb:redis.mget\n\t  248ms: exit:MwhStC:model.profile.cached.get_batched\n\t  249ms: enter:ewAxhR:model.profile.cached.get_batched\n\t  249ms: enter:exaNGp:redis.mget\n\t  249ms: exit:exaNGp:redis.mget\n\t  249ms: exit:ewAxhR:model.profile.cached.get_batched\n\t  249ms: enter:pfsRBV:model.profile.cached.get_batched\n\t  249ms: enter:WahZRb:redis.mget\n\t  249ms: exit:WahZRb:redis.mget\n\t  249ms: exit:pfsRBV:model.profile.cached.get_batched\n\t  249ms: enter:jZHQRV:model.profile.cached.get_batched\n\t  249ms: enter:gmPpCO:redis.mget\n\t  249ms: exit:gmPpCO:redis.mget\n\t  249ms: exit:jZHQRV:model.profile.cached.get_batched\n\t  250ms: enter:BhfHOX:model.profile.cached.get_batched\n\t  250ms: enter:PeKTgs:redis.mget\n\t  250ms: exit:PeKTgs:redis.mget\n\t  250ms: exit:BhfHOX:model.profile.cached.get_batched\n\t  250ms: enter:KUgeyz:model.profile.cached.get_batched\n\t  250ms: enter:qLrsJd:redis.mget\n\t  250ms: exit:qLrsJd:redis.mget\n\t  250ms: exit:KUgeyz:model.profile.cached.get_batched\n\t  250ms: enter:tIqRxK:redis.mget\n\t  250ms: enter:YvRKpf:model.profile.cached.get_batched\n\t  250ms: enter:mchddK:redis.mget\n\t  250ms: exit:mchddK:redis.mget\n\t  250ms: exit:YvRKpf:model.profile.cached.get_batched\n\t  251ms: enter:gbFmgo:model.profile.cached.get_batched\n\t  251ms: enter:PwTqLJ:model.profile.cached.get_batched\n\t  251ms: enter:zeDHHG:redis.mget\n\t  251ms: exit:zeDHHG:redis.mget\n\t  251ms: exit:gbFmgo:model.profile.cached.get_batched\n\t  251ms: enter:dNsNOU:redis.mget\n\t  251ms: exit:dNsNOU:redis.mget\n\t  251ms: exit:PwTqLJ:model.profile.cached.get_batched\n\t  251ms: enter:YeNeSA:model.profile.cached.get_batched\n\t  251ms: enter:hQTVGH:redis.mget\n\t  251ms: exit:hQTVGH:redis.mget\n\t  251ms: exit:YeNeSA:model.profile.cached.get_batched\n\t  251ms: enter:xkWtou:model.profile.cached.get_batched\n\t  251ms: enter:ffcSHX:redis.mget\n\t  251ms: enter:YTyyeJ:redis.mget\n\t  251ms: exit:YTyyeJ:redis.mget\n\t  251ms: exit:xkWtou:model.profile.cached.get_batched\n\t  251ms: enter:rcewhf:redis.mget\n\t  251ms: enter:EwPxLX:model.profile.cached.get_batched\n\t  251ms: enter:pglQma:redis.mget\n\t  251ms: exit:pglQma:redis.mget\n\t  251ms: exit:EwPxLX:model.profile.cached.get_batched\n\t  252ms: exit:SPEojj:redis.mget\n\t  252ms: exit:hUWZsN:model.profile.cached.get_batched\n\t  252ms: enter:rcIrcM:model.profile.cached.get_batched\n\t  252ms: enter:YWWxjm:redis.mget\n\t  252ms: exit:YWWxjm:redis.mget\n\t  252ms: exit:rcIrcM:model.profile.cached.get_batched\n\t  253ms: enter:fUPjSP:model.profile.cached.get_batched\n\t  253ms: enter:ePBMTw:redis.mget\n\t  253ms: exit:ePBMTw:redis.mget\n\t  253ms: exit:fUPjSP:model.profile.cached.get_batched\n\t  253ms: enter:XuvUyV:model.profile.cached.get_batched\n\t  253ms: enter:tcKBCl:redis.mget\n\t  253ms: exit:tcKBCl:redis.mget\n\t  253ms: exit:XuvUyV:model.profile.cached.get_batched\n\t  253ms: enter:kqmbSF:model.profile.cached.get_batched\n\t  253ms: enter:XlExba:redis.mget\n\t  253ms: exit:XlExba:redis.mget\n\t  253ms: exit:kqmbSF:model.profile.cached.get_batched\n\t  253ms: enter:UEeQrj:model.profile.cached.get_batched\n\t  253ms: enter:BOFiph:redis.mget\n\t  253ms: exit:BOFiph:redis.mget\n\t  253ms: exit:UEeQrj:model.profile.cached.get_batched\n\t  253ms: enter:bmSYhB:model.profile.cached.get_batched\n\t  253ms: enter:zmoayN:redis.mget\n\t  253ms: exit:zmoayN:redis.mget\n\t  253ms: exit:bmSYhB:model.profile.cached.get_batched\n\t  254ms: enter:ieIKNb:model.profile.cached.get_batched\n\t  254ms: enter:cshPGu:redis.mget\n\t  254ms: exit:cshPGu:redis.mget\n\t  254ms: exit:ieIKNb:model.profile.cached.get_batched\n\t  254ms: enter:gbWYBU:twolevelredis.get_multi\n\t  255ms: enter:OcoGmC:twolevelredis.get_multi\n\t  255ms: enter:dGpVyH:model.profile.cached.get_batched\n\t  255ms: enter:DTAbvz:model.profile.cached.get_batched\n\t  255ms: enter:Uyjrpi:redis.mget\n\t  255ms: exit:Uyjrpi:redis.mget\n\t  255ms: enter:gAkFBZ:redis.mget\n\t  255ms: exit:dGpVyH:model.profile.cached.get_batched\n\t  255ms: exit:gAkFBZ:redis.mget\n\t  255ms: exit:DTAbvz:model.profile.cached.get_batched\n\t  255ms: enter:RPkXEJ:model.profile.cached.get_batched\n\t  255ms: enter:tdjeps:redis.mget\n\t  255ms: exit:tdjeps:redis.mget\n\t  255ms: exit:RPkXEJ:model.profile.cached.get_batched\n\t  255ms: enter:aFmZrg:model.profile.cached.get_batched\n\t  255ms: enter:SRUwOR:redis.mget\n\t  255ms: exit:SRUwOR:redis.mget\n\t  255ms: exit:aFmZrg:model.profile.cached.get_batched\n\t  255ms: enter:cuZfVy:twolevelredis.get_multi\n\t  255ms: enter:kEXjhD:redis.mget\n\t  255ms: enter:dogbQq:twolevelredis.get_multi\n\t  255ms: enter:pcDSWL:redis.mget\n\t  256ms: enter:vIdYtX:twolevelredis.get_multi\n\t  256ms: enter:FwUOAH:redis.mget\n\t  256ms: enter:sAnJPR:twolevelredis.get_multi\n\t  256ms: enter:hUGBKy:twolevelredis.get_multi\n\t  256ms: enter:GzYgyO:twolevelredis.get_multi\n\t  256ms: enter:XkRxLL:redis.mget\n\t  257ms: enter:xYkNRv:model.profile.cached.get_batched\n\t  257ms: enter:OjZQHi:redis.mget\n\t  257ms: exit:OjZQHi:redis.mget\n\t  257ms: exit:xYkNRv:model.profile.cached.get_batched\n\t  257ms: enter:JprSRN:model.profile.cached.get_batched\n\t  257ms: enter:xsXTTy:redis.mget\n\t  257ms: exit:xsXTTy:redis.mget\n\t  257ms: exit:JprSRN:model.profile.cached.get_batched\n\t  258ms: enter:yTdMQx:twolevelredis.get_multi\n\t  258ms: enter:jSnRQp:twolevelredis.get_multi\n\t  258ms: enter:zWQAwa:twolevelredis.get_multi\n\t  258ms: enter:KxMBUy:redis.mget\n\t  258ms: enter:uKhpMz:twolevelredis.get_multi\n\t  258ms: enter:JLApPE:twolevelredis.get_multi\n\t  259ms: enter:IhhgXV:redis.mget\n\t  259ms: enter:ByyTuv:model.profile.cached.get_batched\n\t  259ms: enter:AxtcTG:redis.mget\n\t  259ms: exit:AxtcTG:redis.mget\n\t  259ms: exit:ByyTuv:model.profile.cached.get_batched\n\t  260ms: enter:CbRFyo:redis.mget\n\t  260ms: enter:gBJgSp:redis.mget\n\t  260ms: enter:yrUGRl:redis.mget\n\t  260ms: enter:kZOJQZ:twolevelredis.get_multi\n\t  260ms: enter:GyIAKg:twolevelredis.get_multi\n\t  260ms: enter:ZqZJSS:twolevelredis.get_multi\n\t  260ms: enter:vZwjmY:redis.mget\n\t  261ms: enter:XFywDn:model.profile.cached.get_batched\n\t  261ms: enter:VhTWpS:redis.mget\n\t  261ms: exit:VhTWpS:redis.mget\n\t  261ms: exit:XFywDn:model.profile.cached.get_batched\n\t  261ms: enter:qupjDf:twolevelredis.get_multi\n\t  261ms: enter:zjHgvs:redis.mget\n\t  262ms: enter:PFgNTQ:redis.mget\n\t  262ms: enter:JZtRBB:twolevelredis.get_multi\n\t  262ms: enter:GaAfry:redis.mget\n\t  262ms: enter:TvrzqK:redis.mget\n\t  263ms: enter:PWOYRI:twolevelredis.get_multi\n\t  263ms: enter:mEozpv:redis.mget\n\t  263ms: enter:oFBRoI:redis.mget\n\t  263ms: enter:NMABLb:redis.mget\n\t  263ms: enter:PRjMra:twolevelredis.get_multi\n\t  263ms: enter:wtYwaY:redis.mget\n\t  264ms: enter:BqbAZE:twolevelredis.get_multi\n\t  264ms: enter:qoGPyO:model.profile.cached.get_batched\n\t  264ms: enter:lKDCWw:redis.mget\n\t  264ms: exit:lKDCWw:redis.mget\n\t  264ms: exit:qoGPyO:model.profile.cached.get_batched\n\t  264ms: enter:KJJTof:twolevelredis.get_multi\n\t  264ms: enter:WJlpOD:redis.mget\n\t  264ms: enter:ggsWbl:redis.mget\n\t  264ms: enter:TQfPPb:redis.mget\n\t  265ms: enter:fsCOTC:twolevelredis.get_multi\n\t  265ms: enter:ANCXjf:twolevelredis.get_multi\n\t  265ms: enter:rILsYt:redis.mget\n\t  265ms: enter:qszDtD:twolevelredis.get_multi\n\t  265ms: enter:TEsKUB:redis.mget\n\t  265ms: enter:qXUNji:twolevelredis.get_multi\n\t  265ms: enter:QriYbQ:redis.mget\n\t  266ms: enter:NbTrJE:redis.mget\n\t  266ms: enter:azvMco:twolevelredis.get_multi\n\t  266ms: enter:RBRONa:redis.mget\n\t  266ms: enter:CVDiQt:twolevelredis.get_multi\n\t  267ms: enter:HRHEuC:twolevelredis.get_multi\n\t  267ms: enter:eQGsws:redis.mget\n\t  267ms: enter:qfTCmw:twolevelredis.get_multi\n\t  267ms: enter:FfCSOy:twolevelredis.get_multi\n\t  268ms: enter:fGKNtr:redis.mget\n\t  269ms: enter:aaUVvB:twolevelredis.get_multi\n\t  269ms: enter:CCkUve:redis.mget\n\t  269ms: enter:mhnNsp:twolevelredis.get_multi\n\t  269ms: enter:nUKNvj:redis.mget\n\t  269ms: enter:vyqrAO:twolevelredis.get_multi\n\t  269ms: enter:KKQmzi:twolevelredis.get_multi\n\t  270ms: enter:UAOSTB:twolevelredis.get_multi\n\t  270ms: enter:aZoOmF:twolevelredis.get_multi\n\t  270ms: enter:PXMRXh:twolevelredis.get_multi\n\t  270ms: enter:NqsbKr:redis.mget\n\t  271ms: enter:LzREnZ:redis.mget\n\t  271ms: enter:arxpFE:twolevelredis.get_multi\n\t  271ms: enter:GwNTmX:redis.mget\n\t  271ms: exit:pcDSWL:redis.mget\n\t  271ms: exit:dogbQq:twolevelredis.get_multi\n\t  271ms: enter:csvkgK:redis.mget\n\t  272ms: enter:HHuNib:twolevelredis.get_multi\n\t  272ms: enter:zvAvCX:redis.mget\n\t  272ms: enter:uOXxVy:twolevelredis.get_multi\n\t  272ms: enter:ulDJph:twolevelredis.get_multi\n\t  272ms: enter:aaDUUJ:redis.mget\n\t  272ms: enter:SbtggL:redis.mget\n\t  272ms: enter:FSqqUE:twolevelredis.get_multi\n\t  272ms: enter:ALPnGO:twolevelredis.get_multi\n\t  273ms: enter:mgOaql:redis.mget\n\t  273ms: enter:UUokPX:twolevelredis.get_multi\n\t  273ms: enter:tpiJUO:redis.mget\n\t  273ms: enter:PARjCs:redis.mget\n\t  274ms: enter:mHdkML:redis.mget\n\t  274ms: enter:hIoMlZ:redis.mget\n\t  275ms: enter:YudfUL:twolevelredis.get_multi\n\t  275ms: enter:JDYCNQ:redis.mget\n\t  276ms: enter:iWyCNi:twolevelredis.get_multi\n\t  276ms: enter:ILXlhn:redis.mget\n\t  276ms: enter:koNoJO:twolevelredis.get_multi\n\t  276ms: enter:FcFPAA:redis.mget\n\t  277ms: enter:WNuOWP:twolevelredis.get_multi\n\t  277ms: enter:CAHsdf:redis.mget\n\t  277ms: enter:rWwZcX:twolevelredis.get_multi\n\t  277ms: enter:XTcRUo:redis.mget\n\t  277ms: enter:CHjuHM:redis.mget\n\t  278ms: enter:DPpaHN:twolevelredis.get_multi\n\t  278ms: enter:mExWcv:twolevelredis.get_multi\n\t  278ms: enter:aFUUDT:redis.mget\n\t  278ms: enter:NehnJj:redis.mget\n\t  279ms: enter:pKIkvw:twolevelredis.get_multi\n\t  279ms: enter:MUlFeR:twolevelredis.get_multi\n\t  279ms: enter:vdJLxg:redis.mget\n\t  280ms: enter:mOpbiA:twolevelredis.get_multi\n\t  280ms: enter:CPPdoG:redis.mget\n\t  280ms: enter:wCIZZq:twolevelredis.get_multi\n\t  280ms: enter:tFrUEW:redis.mget\n\t  281ms: enter:UXDBJp:twolevelredis.get_multi\n\t  281ms: enter:YhEYyz:twolevelredis.get_multi\n\t  281ms: enter:DyYiAS:twolevelredis.get_multi\n\t  281ms: enter:TVySeR:redis.mget\n\t  282ms: enter:jGZsuT:redis.mget\n\t  283ms: enter:qKftBK:redis.mget\n\t  284ms: enter:gSmRut:twolevelredis.get_multi\n\t  284ms: enter:sULjQY:twolevelredis.get_multi\n\t  284ms: enter:dHWOXT:redis.mget\n\t  285ms: enter:nqAFcL:twolevelredis.get_multi\n\t  285ms: enter:BQYJCL:redis.mget\n\t  287ms: enter:tvWUvO:redis.mget\n\t  288ms: enter:cvSdgt:redis.mget\n\t  289ms: enter:TYFAbn:redis.mget\n\t  289ms: enter:WMswYE:redis.mget\n\t  290ms: enter:yQvaDL:twolevelredis.get_multi\n\t  296ms: enter:stxDom:redis.mget\n\t  299ms: enter:JOGbLe:twolevelredis.get_multi\n\t  300ms: enter:HOZTWM:twolevelredis.get_multi\n\t  300ms: enter:cdPaup:twolevelredis.get_multi\n\t  301ms: enter:FLtShe:twolevelredis.get_multi\n\t  301ms: enter:KdRbsw:twolevelredis.get_multi\n\t  301ms: enter:BjlaAb:redis.mget\n\t  301ms: enter:yEELCl:twolevelredis.get_multi\n\t  301ms: enter:SyDtgx:redis.mget\n\t  302ms: enter:TPGgUV:redis.mget\n\t  302ms: enter:IgxesP:twolevelredis.get_multi\n\t  303ms: enter:XcBLdj:twolevelredis.get_multi\n\t  303ms: enter:yqgAHE:redis.mget\n\t  303ms: enter:DTODPS:redis.mget\n\t  304ms: enter:aQlFzT:twolevelredis.get_multi\n\t  304ms: enter:fVMeaW:twolevelredis.get_multi\n\t  305ms: enter:wDyNFr:twolevelredis.get_multi\n\t  305ms: enter:bHWBNx:redis.mget\n\t  305ms: enter:yXPTpu:redis.mget\n\t  306ms: enter:LToTov:twolevelredis.get_multi\n\t  306ms: enter:XoAvmy:redis.mget\n\t  306ms: enter:aswISJ:redis.mget\n\t  307ms: enter:luVzrZ:redis.mget\n\t  307ms: enter:YJVOWB:redis.mget\n\t  309ms: enter:kJGCPQ:redis.mget\n\t  309ms: enter:fqfunH:twolevelredis.get_multi\n\t  311ms: enter:PaJtxd:twolevelredis.get_multi\n\t  312ms: enter:fExemH:twolevelredis.get_multi\n\t  312ms: enter:DXRIDX:twolevelredis.get_multi\n\t  312ms: exit:CPPdoG:redis.mget\n\t  312ms: exit:mOpbiA:twolevelredis.get_multi\n\t  313ms: enter:HCZWIT:redis.mget\n\t  314ms: enter:Kuzite:twolevelredis.get_multi\n\t  315ms: enter:sAznfJ:twolevelredis.get_multi\n\t  315ms: enter:nxaNDl:redis.mget\n\t  315ms: enter:LuYSzk:redis.mget\n\t  317ms: enter:QXprYZ:redis.mget\n\t  318ms: enter:OqZfPE:redis.mget\n\t  318ms: enter:pWavqt:redis.mget\n\t  322ms: enter:DQumKo:twolevelredis.get_multi\n\t  322ms: enter:nHGTsW:redis.mget\n\t  337ms: enter:KdMaIU:twolevelredis.get_multi\n\t  340ms: enter:cZUQqI:redis.mget\n\t  355ms: exit:aaDUUJ:redis.mget\n\t  356ms: exit:CCkUve:redis.mget\n\t  356ms: exit:ulDJph:twolevelredis.get_multi\n\t  356ms: exit:wtYwaY:redis.mget\n\t  356ms: exit:aaUVvB:twolevelredis.get_multi\n\t  356ms: exit:PRjMra:twolevelredis.get_multi\n\t  356ms: enter:ZRLLYb:twolevelredis.get_multi\n\t  356ms: enter:BkYNGA:redis.mget\n\t  356ms: exit:mEozpv:redis.mget\n\t  356ms: exit:PWOYRI:twolevelredis.get_multi\n\t  357ms: enter:ULuySO:twolevelredis.get_multi\n\t  357ms: exit:eQGsws:redis.mget\n\t  357ms: exit:HRHEuC:twolevelredis.get_multi\n\t  357ms: enter:AmNwvk:twolevelredis.get_multi\n\t  357ms: enter:yOiicp:redis.mget\n\t  360ms: enter:QTGCMP:redis.mget\n\t  360ms: exit:KxMBUy:redis.mget\n\t  360ms: exit:zWQAwa:twolevelredis.get_multi\n\t  363ms: exit:GwNTmX:redis.mget\n\t  363ms: exit:arxpFE:twolevelredis.get_multi\n\t  364ms: exit:kEXjhD:redis.mget\n\t  364ms: exit:cuZfVy:twolevelredis.get_multi\n\t  405ms: exit:BkYNGA:redis.mget\n\t  405ms: exit:ZRLLYb:twolevelredis.get_multi\n\t  410ms: exit:RBRONa:redis.mget\n\t  410ms: exit:azvMco:twolevelredis.get_multi\n\t  416ms: exit:tFrUEW:redis.mget\n\t  416ms: exit:wCIZZq:twolevelredis.get_multi\n\t  431ms: exit:ILXlhn:redis.mget\n\t  432ms: exit:iWyCNi:twolevelredis.get_multi\n\t  434ms: exit:CAHsdf:redis.mget\n\t  434ms: exit:WNuOWP:twolevelredis.get_multi\n\t  434ms: exit:ggsWbl:redis.mget\n\t  434ms: exit:KJJTof:twolevelredis.get_multi\n\t  440ms: exit:XoAvmy:redis.mget\n\t  440ms: exit:LToTov:twolevelredis.get_multi\n\t  462ms: exit:BjlaAb:redis.mget\n\t  462ms: exit:KdRbsw:twolevelredis.get_multi\n\t  464ms: exit:vZwjmY:redis.mget\n\t  464ms: exit:ZqZJSS:twolevelredis.get_multi\n\t  464ms: exit:zvAvCX:redis.mget\n\t  465ms: exit:CHjuHM:redis.mget\n\t  465ms: exit:HHuNib:twolevelredis.get_multi\n\t  465ms: exit:aFUUDT:redis.mget\n\t  465ms: exit:rWwZcX:twolevelredis.get_multi\n\t  465ms: exit:mExWcv:twolevelredis.get_multi\n\t  471ms: exit:yOiicp:redis.mget\n\t  471ms: exit:AmNwvk:twolevelredis.get_multi\n\t  472ms: exit:rcewhf:redis.mget\n\t  474ms: exit:OkFqjW:twolevelredis.get_multi\n\t  478ms: exit:vdJLxg:redis.mget\n\t  478ms: exit:MUlFeR:twolevelredis.get_multi\n\t  478ms: exit:tpiJUO:redis.mget\n\t  478ms: exit:JDYCNQ:redis.mget\n\t  478ms: exit:mgOaql:redis.mget\n\t  478ms: exit:UUokPX:twolevelredis.get_multi\n\t  479ms: exit:YudfUL:twolevelredis.get_multi\n\t  480ms: exit:nHGTsW:redis.mget\n\t  480ms: exit:DQumKo:twolevelredis.get_multi\n\t  480ms: exit:QriYbQ:redis.mget\n\t  480ms: exit:qXUNji:twolevelredis.get_multi\n\t  480ms: exit:tIqRxK:redis.mget\n\t  483ms: exit:vyqrAO:twolevelredis.get_multi\n\t  483ms: exit:TVySeR:redis.mget\n\t  485ms: exit:WsCRzQ:twolevelredis.get_multi\n\t  487ms: exit:koNoJO:twolevelredis.get_multi\n\t  491ms: exit:TEsKUB:redis.mget\n\t  491ms: exit:nxaNDl:redis.mget\n\t  491ms: exit:TQfPPb:redis.mget\n\t  491ms: exit:nUKNvj:redis.mget\n\t  491ms: exit:ffcSHX:redis.mget\n\t  491ms: exit:sAznfJ:twolevelredis.get_multi\n\t  491ms: exit:mhnNsp:twolevelredis.get_multi\n\t  493ms: exit:qszDtD:twolevelredis.get_multi\n\t  493ms: exit:rILsYt:redis.mget\n\t  493ms: exit:HCZWIT:redis.mget\n\t  493ms: exit:SyDtgx:redis.mget\n\t  493ms: exit:yXPTpu:redis.mget\n\t  493ms: exit:LuYSzk:redis.mget\n\t  493ms: exit:yEELCl:twolevelredis.get_multi\n\t  493ms: exit:cZUQqI:redis.mget\n\t  493ms: exit:bHWBNx:redis.mget\n\t  493ms: exit:kJGCPQ:redis.mget\n\t  493ms: exit:DTODPS:redis.mget\n\t  493ms: exit:aswISJ:redis.mget\n\t  493ms: exit:jGZsuT:redis.mget\n\t  494ms: exit:NbTrJE:redis.mget\n\t  495ms: exit:GaAfry:redis.mget\n\t  495ms: exit:fsCOTC:twolevelredis.get_multi\n\t  496ms: exit:DXRIDX:twolevelredis.get_multi\n\t  496ms: exit:GyIAKg:twolevelredis.get_multi\n\t  496ms: exit:IgxesP:twolevelredis.get_multi\n\t  496ms: exit:tvWUvO:redis.mget\n\t  497ms: exit:TYFAbn:redis.mget\n\t  497ms: exit:dHWOXT:redis.mget\n\t  497ms: exit:csvkgK:redis.mget\n\t  498ms: exit:glERuw:twolevelredis.get_multi\n\t  498ms: exit:KdMaIU:twolevelredis.get_multi\n\t  498ms: exit:XcBLdj:twolevelredis.get_multi\n\t  498ms: exit:cdPaup:twolevelredis.get_multi\n\t  498ms: exit:wDyNFr:twolevelredis.get_multi\n\t  498ms: exit:JZtRBB:twolevelredis.get_multi\n\t  499ms: exit:DPpaHN:twolevelredis.get_multi\n\t  499ms: exit:HOZTWM:twolevelredis.get_multi\n\t  499ms: exit:luVzrZ:redis.mget\n\t  499ms: exit:yTdMQx:twolevelredis.get_multi\n\t  499ms: exit:UXDBJp:twolevelredis.get_multi\n\t  499ms: exit:BQYJCL:redis.mget\n\t  500ms: exit:qfTCmw:twolevelredis.get_multi\n\t  500ms: exit:YJVOWB:redis.mget\n\t  500ms: exit:fqfunH:twolevelredis.get_multi\n\t  500ms: exit:NehnJj:redis.mget\n\t  500ms: exit:XkRxLL:redis.mget\n\t  500ms: exit:TvrzqK:redis.mget\n\t  501ms: exit:SbtggL:redis.mget\n\t  501ms: exit:qKftBK:redis.mget\n\t  501ms: exit:uOXxVy:twolevelredis.get_multi\n\t  501ms: exit:QTGCMP:redis.mget\n\t  501ms: exit:OqZfPE:redis.mget\n\t  501ms: exit:stxDom:redis.mget\n\t  501ms: exit:GzYgyO:twolevelredis.get_multi\n\t  501ms: exit:WMswYE:redis.mget\n\t  502ms: exit:mHdkML:redis.mget\n\t  502ms: exit:aQlFzT:twolevelredis.get_multi\n\t  503ms: exit:hIoMlZ:redis.mget\n\t  503ms: exit:IhhgXV:redis.mget\n\t  503ms: exit:fGKNtr:redis.mget\n\t  503ms: exit:nqAFcL:twolevelredis.get_multi\n\t  504ms: exit:PFgNTQ:redis.mget\n\t  504ms: exit:DyYiAS:twolevelredis.get_multi\n\t  504ms: exit:YhEYyz:twolevelredis.get_multi\n\t  504ms: exit:fVMeaW:twolevelredis.get_multi\n\t  504ms: exit:FSqqUE:twolevelredis.get_multi\n\t  505ms: exit:pKIkvw:twolevelredis.get_multi\n\t  506ms: exit:ULuySO:twolevelredis.get_multi\n\t  506ms: exit:Kuzite:twolevelredis.get_multi\n\t  506ms: exit:XTcRUo:redis.mget\n\t  507ms: exit:CbRFyo:redis.mget\n\t  507ms: exit:cvSdgt:redis.mget\n\t  507ms: exit:sULjQY:twolevelredis.get_multi\n\t  507ms: exit:gBJgSp:redis.mget\n\t  507ms: exit:NqsbKr:redis.mget\n\t  507ms: exit:ANCXjf:twolevelredis.get_multi\n\t  508ms: exit:NMABLb:redis.mget\n\t  508ms: exit:pWavqt:redis.mget\n\t  508ms: exit:oFBRoI:redis.mget\n\t  508ms: exit:yQvaDL:twolevelredis.get_multi\n\t  508ms: exit:jSnRQp:twolevelredis.get_multi\n\t  508ms: exit:aZoOmF:twolevelredis.get_multi\n\t  508ms: exit:gbWYBU:twolevelredis.get_multi\n\t  508ms: exit:LzREnZ:redis.mget\n\t  509ms: exit:PXMRXh:twolevelredis.get_multi\n\t  509ms: exit:PARjCs:redis.mget\n\t  510ms: exit:uKhpMz:twolevelredis.get_multi\n\t  510ms: exit:WJlpOD:redis.mget\n\t  510ms: exit:BqbAZE:twolevelredis.get_multi\n\t  510ms: exit:yrUGRl:redis.mget\n\t  510ms: exit:yqgAHE:redis.mget\n\t  511ms: exit:QXprYZ:redis.mget\n\t  511ms: exit:FwUOAH:redis.mget\n\t  511ms: exit:vIdYtX:twolevelredis.get_multi\n\t  511ms: exit:FcFPAA:redis.mget\n\t  512ms: exit:CVDiQt:twolevelredis.get_multi\n\t  512ms: exit:kZOJQZ:twolevelredis.get_multi\n\t  512ms: exit:OcoGmC:twolevelredis.get_multi\n\t  512ms: exit:JLApPE:twolevelredis.get_multi\n\t  513ms: exit:hUGBKy:twolevelredis.get_multi\n\t  513ms: exit:FfCSOy:twolevelredis.get_multi\n\t  513ms: exit:zjHgvs:redis.mget\n\t  513ms: exit:gSmRut:twolevelredis.get_multi\n\t  513ms: exit:UAOSTB:twolevelredis.get_multi\n\t  513ms: exit:TPGgUV:redis.mget\n\t  514ms: exit:qupjDf:twolevelredis.get_multi\n\t  514ms: exit:JOGbLe:twolevelredis.get_multi\n\t  515ms: exit:fExemH:twolevelredis.get_multi\n\t  515ms: exit:sAnJPR:twolevelredis.get_multi\n\t  515ms: exit:FLtShe:twolevelredis.get_multi\n\t  515ms: exit:ALPnGO:twolevelredis.get_multi\n\t  515ms: exit:KKQmzi:twolevelredis.get_multi\n\t  516ms: exit:PaJtxd:twolevelredis.get_multi\n\t  537ms: exit:Nruqbn:interpreter.eval\n\t  543ms: exit:PkmgHb:query",
    "tier_id": 107
}
'''


def main():
    if path:
        with open(path) as trace_src:
            t = trace_src.read().replace('\t', '')
            t = t.replace('\n', '')
            data = json.loads(t)
    else:
        data = _JSON_DATA
        data = data.replace('\t', '')
        data = data.replace('\n', '')
        data = json.loads(data)

    events = data['msg'].split('\n')[1:]
    formatted_events = []
    for e in events:
        formatted_events.append(e.strip())

    ids = {}    
    for e in formatted_events:
        attrs = e.split(':')
        timestamp = int(attrs[0][:-2])
        id = attrs[2]
        name = attrs[3]
        if id not in ids:
            ids[id] = []
        ids[id].append({"at": timestamp, "frame": id, "name": name})

    plt.rcdefaults()
    fig, ax = plt.subplots()

    data = []
    for id, entry in ids.items():
        dur = entry[1]["at"] - entry[0]["at"]
        data.append({"id": f'{id}/{entry[0]["name"]}', "dur": dur, "left": entry[0]["at"]})

    sorted_data = sorted(data, key=lambda d: d['dur'])
    sorted_data = sorted_data[-n:]

    y_pos = np.arange(len(sorted_data))
    values = [v["dur"] for v in sorted_data]
    lefts = [v["left"] for v in sorted_data]
    idx = [v["id"] for v in sorted_data]

    ax.barh(y_pos, values, left=lefts, align='center')
    ax.set_yticks(y_pos, labels=idx)
    ax.invert_yaxis()  # labels read top-to-bottom
    ax.set_xlabel('time elapsed')
    ax.set_title('profile')
    for i, v in enumerate(values):
        ax.text(v + lefts[i] + 3, i + .25, str(v), color='blue', fontweight='bold')

    plt.show()


if __name__ == "__main__":
    main()